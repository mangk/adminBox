import"./XvueBaz_cZdj.js";import{u as e,a as l}from"./XindexDJaXbwzH.js";import{f as a}from"./X@vueuseCCX6pF6_.js";import{$ as o,b as t,bP as u,H as r,c as s,X as n,Q as i,F as d,ah as m,o as c,L as v,a as p,W as f,U as g,P as y,u as h,V as b,a8 as w,Z as x,S as k,i as _}from"./X@vuen9TiMG2O.js";import"./XpiniaYeQOi8UL.js";import"./Xelement-plusCBHzP_ll.js";import"./Xlodash-esBg5u8xPa.js";import"./X@element-plusTeXHQB6B.js";import"./X@popperjsD3lHDW-0.js";import"./X@ctrlD2oWfImC.js";import"./Xdayjst441MSVg.js";import"./Xasync-validatorCuo4gI4y.js";import"./Xmemoize-oneDs0C_khL.js";import"./Xnormalize-wheel-esVn5vHDCm.js";import"./X@floating-uipMauM7H8.js";import"./XaxiosDtE8dZ3W.js";import"./XmittCNZ6avp8.js";import"./Xvue-routerzsXVQF6n.js";import"./XnprogressDgs0sPf-.js";import"./Xvue3-sfc-loaderDa78GGQm.js";const j=["src"],X={key:0,class:"header-name"},V={key:0},S={class:"demo-rich-conent",style:{display:"flex",gap:"6px","flex-direction":"column"}},C={key:0},$={style:{display:"flex","justify-content":"space-between","align-items":"center"}},N={style:{display:"flex","justify-content":"space-between","align-items":"center"}},U={class:"dialog-footer"},O="#2d2d32",P={__name:"styleDefault",async setup(P){let I,z;const J=o(localStorage.getItem("x-theme-config")?JSON.parse(localStorage.getItem("x-theme-config")):{darkSidebar:!0}),B=t(!1),F=t(J.headerMenu),L=e=>{J.headerMenu=e,localStorage.setItem("x-theme-config",JSON.stringify(J))},M=t(J.darkSidebar),W=e=>{J.darkSidebar=e,localStorage.setItem("x-theme-config",JSON.stringify(J))},q=a("--el-color-primary");J.colorPrimary&&(q.value=J.colorPrimary);const D=[{value:"#4167F0",label:"blue"},{value:"#E63415",label:"red"},{value:"#e0620e",label:"orange"},{value:"#1EC79D",label:"green"},{value:"#6222C9",label:"purple"},{value:"#000",label:"black"}],E=t(window.adminBox.Logo?window.adminBox.Logo:"./images/logo.svg"),T=t(window.adminBox.Name),H=e(),Q=t({});Q.value=([I,z]=u((()=>H.userInfo())),I=await I,z(),I);const R=()=>{H.logOut()},Z=t(!1),A=([I,z]=u((()=>l().loadServerRouter())),I=await I,z(),I),G=(e,l)=>{},K=(e,l)=>{},Y=()=>{document.body.clientWidth>=1100?Z.value=!1:Z.value=!0,B.value=document.body.clientWidth<=550},{proxy:ee}=_(),le=t(!1),ae=()=>{le.value=!1},oe=t({old:"",new:"",confirmNew:""}),te=()=>{oe.value.old?oe.value.new?oe.value.confirmNew?oe.value.old!=oe.value.new?oe.value.new===oe.value.confirmNew?ee.$http({url:"/sys/setting/user/changePassword",method:"PUT",data:oe.value}).then((e=>{0==e.code&&(le.value=!1,ee.$message.success("修改完成，下次登录请使用新密码"))})):ee.$message.error("新密码两次输入不一致"):ee.$message.error("新密码不能与旧密码相同"):ee.$message.error("重复新密码 不能为空"):ee.$message.error("新密码 不能为空"):ee.$message.error("当前密码 不能为空")};return r(Y),window.onresize=()=>Y(),(e,l)=>{const a=m("MenuTree"),o=m("el-menu"),t=m("el-scrollbar"),u=m("el-avatar"),r=m("el-divider"),_=m("el-tag"),P=m("el-switch"),I=m("el-button"),z=m("el-popover"),H=m("el-header"),Y=m("el-aside"),ee=m("router-view"),ue=m("el-main"),re=m("el-container"),se=m("el-input"),ne=m("el-form-item"),ie=m("el-form"),de=m("el-dialog");return c(),s(d,null,[n(re,{style:{width:"100%",height:"100%"}},{default:i((()=>[n(H,{class:"box-header",style:v({"background-color":M.value?O:"",color:M.value?"#fff":""})},{default:i((()=>[p("div",{class:"header-logo-box",style:v({boxShadow:F.value||B.value?"2px 0 4px rgba(0, 0, 0, 0.16)":"unset"})},[p("img",{class:"header-logo",src:E.value},null,8,j),B.value?g("",!0):(c(),s("div",X,f(T.value),1))],4),n(t,{style:{height:"var(--box-header-height)",margin:"0 8px"}},{default:i((()=>[F.value||B.value?(c(),y(o,{key:0,class:"header-menu","default-active":e.$route.name,onOpen:G,onClose:K,collapse:Z.value,"unique-opened":"",router:"",mode:"horizontal",ellipsis:!1,"background-color":M.value?O:"","text-color":M.value?"#fff":"",style:{width:"auto"}},{default:i((()=>[n(a,{menus:h(A)},null,8,["menus"])])),_:1},8,["default-active","collapse","background-color","text-color"])):g("",!0)])),_:1}),n(z,null,{reference:i((()=>[p("div",{class:"left header-user",style:v({boxShadow:F.value||B.value?"-2px 0 4px rgba(0, 0, 0, 0.16)":"unset"})},[B.value?g("",!0):(c(),s("span",V,f(Q.value.nick_name),1)),n(u,{src:Q.value.avatar,icon:"UserFilled",size:30,style:{"margin-left":"5px"}},null,8,["src"])],4)])),default:i((()=>[p("div",S,[B.value?(c(),s("div",C,[b(f(Q.value.nick_name)+" ",1),n(r,{style:{margin:"0"}})])):g("",!0),p("div",null,[(c(),s(d,null,w(D,(e=>n(_,{key:e,color:e.value,onClick:l=>{return a=e.value,q.value=a,J.colorPrimary=a,void localStorage.setItem("x-theme-config",JSON.stringify(J));var a}},null,8,["color","onClick"]))),64))]),n(r,{style:{margin:"0"}}),p("div",$,[b(" 顶部菜单"),n(P,{modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value=e),onChange:L,disabled:B.value},null,8,["modelValue","disabled"])]),n(r,{style:{margin:"0"}}),p("div",N,[b(" 深色边栏"),n(P,{modelValue:M.value,"onUpdate:modelValue":l[1]||(l[1]=e=>M.value=e),onChange:W},null,8,["modelValue"])]),n(r,{style:{margin:"0"}}),n(I,{link:"",onClick:l[2]||(l[2]=e=>le.value=!0),style:{width:"100%"}},{default:i((()=>[b("修改密码")])),_:1}),n(r,{style:{margin:"0"}}),n(I,{link:"",onClick:R},{default:i((()=>[b("退出")])),_:1})])])),_:1})])),_:1},8,["style"]),n(re,{class:"box-asside-and-main"},{default:i((()=>[F.value||B.value?g("",!0):(c(),y(Y,{key:0,class:"box-aside",style:v({"background-color":M.value?O:"",color:M.value?"#fff":""})},{default:i((()=>[n(t,null,{default:i((()=>[n(x,{duration:{enter:800,leave:100},mode:"out-in",name:"el-fade-in-linear"},{default:i((()=>[n(o,{"default-active":e.$route.name,onOpen:G,onClose:K,collapse:Z.value,"unique-opened":"",router:"","background-color":M.value?O:"","text-color":M.value?"#fff":""},{default:i((()=>[n(a,{menus:h(A)},null,8,["menus"])])),_:1},8,["default-active","collapse","background-color","text-color"])])),_:1})])),_:1})])),_:1},8,["style"])),n(ue,{class:"box-main"},{default:i((()=>[n(t,null,{default:i((()=>[n(ee,null,{default:i((({Component:l})=>[n(x,{duration:{enter:800,leave:100},mode:"out-in",name:"el-fade-in-linear"},{default:i((()=>[(c(),y(k(l),{key:e.$route.path}))])),_:2},1024)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(de,{modelValue:le.value,"onUpdate:modelValue":l[6]||(l[6]=e=>le.value=e),title:"修改密码",width:"500"},{footer:i((()=>[p("div",U,[n(I,{onClick:ae},{default:i((()=>[b("取消")])),_:1}),n(I,{type:"primary",onClick:te},{default:i((()=>[b(" 确认修改 ")])),_:1})])])),default:i((()=>[n(ie,{"label-position":"right","label-width":"auto"},{default:i((()=>[n(ne,{label:"当前密码","label-position":"right"},{default:i((()=>[n(se,{modelValue:oe.value.old,"onUpdate:modelValue":l[3]||(l[3]=e=>oe.value.old=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(ne,{label:"新密码","label-position":"right"},{default:i((()=>[n(se,{modelValue:oe.value.new,"onUpdate:modelValue":l[4]||(l[4]=e=>oe.value.new=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(ne,{label:"重复新密码","label-position":"right"},{default:i((()=>[n(se,{modelValue:oe.value.confirmNew,"onUpdate:modelValue":l[5]||(l[5]=e=>oe.value.confirmNew=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};export{P as default};
