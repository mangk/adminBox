const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./X404DLzpbq3O.js","./X_plugin-vue_export-helperBCo6x5W8.js","./XbaseManagerD47n3FIu.js","./XvueVe3_Elhr.js","./X@vueCM7II4So.js","./X@element-plusCerOoRDG.js","./XfileUploadiTSLYb7E.js","./Xqiniu-jsD3ZZPLL7.js","./Xspark-md5D6_etk78.js","./Xcos-js-sdk-v5B2H1ItxU.js","./Xexif-jsCAaicHrt.js","./Xelement-plusCO1bik-q.js","./Xlodash-esBCrAzI1e.js","./X@vueuseDU8TvUvn.js","./X@popperjsD3lHDW-0.js","./X@ctrlD2oWfImC.js","./XdayjsBLCVIqfw.js","./Xasync-validatorCuo4gI4y.js","./Xmemoize-oneDs0C_khL.js","./Xnormalize-wheel-esVn5vHDCm.js","./X@floating-uipMauM7H8.js","./XpiniaHbUHA5wR.js","./XaxiosDtE8dZ3W.js","./XmittCNZ6avp8.js","./Xvue-routerCYJBVSJE.js","./XnprogressCIdgZ774.js","./Xvue3-sfc-loaderDa78GGQm.js","./XfileManagerBoxBzOvBZoS.js","./XmanagerQDkwjThr.js","./XlogincXnXtCaZ.js","./XmenuTreeDGHYaC8h.js","./XstyleDefaultDD2Z-GHG.js","./XtabDxAbIBqX.js","./XapiCul9Az0C.js","./Xmenu8_wjIVhE.js","./XdepartmentClESbZIw.js","./XdepartmentBgzA223C.js","./XpremissionSetmYIRXBHX.js","./XindexuASFW-9W.js","./XfileUploadDJBcmgrf.js","./XmenuBpFtu3uB.js","./XroleBUD4lofI.js","./XroleaR_Ltp1q.js","./XuserBtM_C5FA.js","./XserverComponentmzSxn3Tp.js","./XwelcomeDCxhFWzc.js"])))=>i.map(i=>d[i]);
import{V as e}from"./XvueVe3_Elhr.js";import{d as t,c as o}from"./XpiniaHbUHA5wR.js";import{E as r,a as n,z as a,b as i,c as s}from"./Xelement-plusCO1bik-q.js";import{Q as l}from"./X@element-plusCerOoRDG.js";import{a as u}from"./XaxiosDtE8dZ3W.js";import{m}from"./XmittCNZ6avp8.js";import{c,a as d}from"./Xvue-routerCYJBVSJE.js";import{N as p}from"./XnprogressCIdgZ774.js";import{e as f,a_ as g,an as w,d as _,ab as v,al as h,o as y,H as E,I as j,aN as P,Q as T,u as b,au as R}from"./X@vueCM7II4So.js";import{i as x}from"./Xvue3-sfc-loaderDa78GGQm.js";import"./Xlodash-esBCrAzI1e.js";import"./X@vueuseDU8TvUvn.js";import"./X@popperjsD3lHDW-0.js";import"./X@ctrlD2oWfImC.js";import"./XdayjsBLCVIqfw.js";import"./Xcos-js-sdk-v5B2H1ItxU.js";import"./Xasync-validatorCuo4gI4y.js";import"./Xmemoize-oneDs0C_khL.js";import"./Xnormalize-wheel-esVn5vHDCm.js";import"./X@floating-uipMauM7H8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I=m(),X={},A=function(e,t,o){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),a=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=Promise.allSettled(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,o),t in X)return;X[t]=!0;const r=t.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!o)for(let o=e.length-1;o>=0;o--){const n=e[o];if(n.href===t&&(!r||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");return i.rel=r?"stylesheet":"modulepreload",r||(i.as="script"),i.crossOrigin="",i.href=t,a&&i.setAttribute("nonce",a),document.head.appendChild(i),r?new Promise(((e,o)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},L=()=>W({url:"/sys/auth/permissionAll",method:"GET"}),S=(e,t)=>W({url:"/sys/auth/permissionGetByIdAndModule",method:"POST",data:{id:e,module:t}}),O=e=>W({url:"/sys/auth/permissionSave",method:"PUT",data:e}),D=()=>W({url:"/sys/verificationCode",method:"GET"}),B=Object.assign({"../views/404.vue":()=>A((()=>import("./X404DLzpbq3O.js")),__vite__mapDeps([0,1]),import.meta.url),"../views/file/baseManager.vue":()=>A((()=>import("./XbaseManagerD47n3FIu.js")),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),"../views/file/fileManagerBox.vue":()=>A((()=>import("./XfileManagerBoxBzOvBZoS.js")),__vite__mapDeps([27,3,4,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),"../views/file/manager.vue":()=>A((()=>import("./XmanagerQDkwjThr.js")),__vite__mapDeps([28,3,4,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),"../views/login.vue":()=>A((()=>import("./XlogincXnXtCaZ.js")),__vite__mapDeps([29,3,4,24,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,25,26]),import.meta.url),"../views/main/menuTree.vue":()=>A((()=>import("./XmenuTreeDGHYaC8h.js")),__vite__mapDeps([30,3,4,24,1]),import.meta.url),"../views/main/styleDefault.vue":()=>A((()=>import("./XstyleDefaultDD2Z-GHG.js")),__vite__mapDeps([31,3,4,13,21,11,12,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/main/tab.vue":()=>A((()=>import("./XtabDxAbIBqX.js")),__vite__mapDeps([32,3,4,24,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,25,26]),import.meta.url),"../views/setting/api.vue":()=>A((()=>import("./XapiCul9Az0C.js")),__vite__mapDeps([33,3,4,34,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/setting/department.vue":()=>A((()=>import("./XdepartmentClESbZIw.js")),__vite__mapDeps([35,3,4,5,36,37,1,21,11,12,13,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/setting/index.vue":()=>A((()=>import("./XindexuASFW-9W.js")),__vite__mapDeps([38,3,4,39,6,11,12,13,5,14,15,16,9,17,18,19,20,21,22,23,24,25,26]),import.meta.url),"../views/setting/menu.vue":()=>A((()=>import("./XmenuBpFtu3uB.js")),__vite__mapDeps([40,3,4,34,5,1,21,11,12,13,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/setting/premissionSet.vue":()=>A((()=>import("./XpremissionSetmYIRXBHX.js")),__vite__mapDeps([37,3,4,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/setting/role.vue":()=>A((()=>import("./XroleBUD4lofI.js")),__vite__mapDeps([41,3,4,42,37,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url),"../views/setting/user.vue":()=>A((()=>import("./XuserBtM_C5FA.js")),__vite__mapDeps([43,3,4,37,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,24,25,26,36,42,39,6]),import.meta.url),"../views/util/fileUpload.vue":()=>A((()=>import("./XfileUploadDJBcmgrf.js")),__vite__mapDeps([39,3,4,6,11,12,13,5,14,15,16,9,17,18,19,20,21,22,23,24,25,26]),import.meta.url),"../views/util/serverComponent.vue":()=>A((()=>import("./XserverComponentmzSxn3Tp.js")),__vite__mapDeps([44,3,4,24,1]),import.meta.url),"../views/welcome.vue":()=>A((()=>import("./XwelcomeDCxhFWzc.js")),__vite__mapDeps([45,3,4,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url)}),$=Object.assign({});function C(e){const t=Object.keys(B).filter((t=>t.replace("../","")===e))[0];return B[t]}function V(e){e.length&&e.forEach((e=>{e.component&&("views"===e.component.split("/")[0]?e.component=C(e.component):"plugins"===e.component.split("/")[0]&&(e.component=function(e){const t=Object.keys($).filter((t=>t.replace("../","")===e))[0];return $[t]}(e.component))),e.children&&e.children.length&&V(e.children)}))}function k(){var e="admin";return window._adminBox&&window._adminBox.backgroundPrefix&&(e=window._adminBox.backgroundPrefix),e}const N=(e=!1)=>{-1==["/","/login"].indexOf(K.currentRoute.value.path)&&(r({showClose:!0,message:"身份认证失败",type:"error"}),encodeURIComponent(K.currentRoute.value.fullPath)),K.currentRoute.value.query.redirect&&K.currentRoute.value.query.redirect;K.replace({path:"/login"})},U=t("user",(()=>{const e=f(0),t=f({}),o=()=>(window.adminBox.Name?window.adminBox.Name+"-":"")+"x-token",n=()=>(window.adminBox.Name?window.adminBox.Name+"-":"")+"x-user-type",a=()=>(window.adminBox.Name?window.adminBox.Name+"-":"")+"x-user-id";return{initialized:e,userInfo:(o=!1)=>((o||0===e.value)&&(e.value=1),t.value),setUserData:e=>{t.value=e},logIn:async i=>{const s=k();var l,u=await(l=i,W({url:"/sys/login",method:"POST",data:l}));if(0!=u.code)return r.error(u.msg),"";t.value=u.data,e.value=1,await localStorage.setItem(o(),u.data.jwt_token),await localStorage.setItem(n(),"default"),await localStorage.setItem(a(),u.data.id);const m=J();return await m.loadServerRouter(!0),K.currentRoute.value.query.redirect?decodeURIComponent(K.currentRoute.value.query.redirect):u.data.user_config.home_page?u.data.user_config.home_page:`/${s}/welcome`},logOut:()=>{var e;localStorage.clear();let t=null==(e=window.adminBox)?void 0:e.RunAt;window.location.href=t??window.location.origin},isLogIn:()=>localStorage.getItem(o())&&localStorage.getItem(n())&&localStorage.getItem(a()),userAuth:()=>{let e=localStorage.getItem(o()),t=localStorage.getItem(n()),r=localStorage.getItem(a());return e&&t&&r?{token:e,userType:t,userId:r}:(N(!0),!1)}}})),M={};function q(e,t=null){"string"==typeof e&&(e=[e]);const o=e.map((e=>new Promise(((t,o)=>{if(M[e])return void t();const r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t,r.onerror=o,document.head.appendChild(r),M[e]=!0}))));Promise.all(o).then((()=>{"function"==typeof t&&t()})).catch((e=>{}))}function z(t,o="myConvert",r={}){const{timeout:n=5e3,devMode:a=!1,retryOnFail:i=!1,maxRetries:s=2,loadingComponent:l=null,errorComponent:u=null,delay:m=200,errorTimeout:c=0}=r,d=void 0!==g||e&&g?g:null,p=void 0!==w||e&&w?w:e=>e;if(!d)throw new Error("defineAsyncComponent is not available in this environment");let f=[];const h={moduleCache:{vue:e},getFile(){const e=a?`${t}${t.includes("?")?"&":"?"}t=${Date.now()}`:t,o=(async()=>{try{const t=await W(e,{method:"GET"});if(t&&"undefined"!=typeof Response&&t instanceof Response){if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}`);return await t.text()}if(t&&"object"==typeof t&&"data"in t)return"string"==typeof t.data?t.data:JSON.stringify(t.data);if("string"==typeof t)return t;if(t&&"object"==typeof t&&"body"in t)return"string"==typeof t.body?t.body:JSON.stringify(t.body);throw new Error("Unsupported response shape from http()")}catch(t){throw t}})(),r=new Promise(((e,t)=>setTimeout((()=>t(new Error(`Request timed out after ${n} ms`))),n)));return Promise.race([o,r]).catch((e=>{const t=new Error(`[loadTMPL:getFile] ${e&&e.message?e.message:e}`);return Promise.reject(t)}))},addStyle(e){try{let t=document.getElementById(o);t||(t=document.createElement("style"),t.setAttribute("id",o),document.head.appendChild(t)),t.textContent=e}catch(t){}},log(e,...t){try{f.push({type:e,args:t});(console[e]||console.log).call(console,`[vue3-sfc-loader:${o}]`,...t)}catch(r){}},devMode:a},y=u||(e&&_?_({props:{message:{type:String,default:""}},setup:e=>()=>v("div",{style:"padding:12px;border:1px solid rgba(255,0,0,0.25);background:rgba(255,0,0,0.03);color:#900;font-family:monospace"},[v("div",{style:"font-weight:600;margin-bottom:6px"},`Failed to load component "${o}".`),v("div",{},"See console for details."),e.message?v("pre",{style:"white-space:pre-wrap;margin-top:8px"},e.message):null])}):null);let E=0;const j=d({loader:async()=>(E=0,(async()=>{let e;f=[];try{e=await x(`${o}.vue`,h)}catch(n){throw n}const t=f.filter((e=>"error"===e.type||"warn"===e.type)).map((e=>Array.isArray(e.args)?e.args.map(String).join(" "):String(e.args)));if(t.length>0){const e=t.join("\n");throw new Error(`${o} compile/loader errors:\n${e}`)}const r=e&&(e.default||e);if(!r||"object"!=typeof r&&"function"!=typeof r)throw new Error(`${o} did not export a valid component`);return p(r)})()),loadingComponent:l||null,errorComponent:y,delay:m,timeout:c||void 0,suspensible:!1,onError(e,t,o){E+=1,i&&E<=s?setTimeout((()=>{t()}),200*E):o()}});return p(j)}const F=k(),G={default:C("views/main/styleDefault.vue")},H=e=>(G[e]||(G[e]=z(e)),G[e]),J=t("router",(()=>{const e=f(0),t=f([]);return{initialized:e,loadServerRouter:async(o=!1)=>{const r=U();if(o||0===e.value){e.value=1;const o=await W({url:"/sys/auth/userPermission",method:"GET"});t.value=o.data.menu[0].children,r.setUserData(o.data.user),V(t.value);let n=window.adminBox.Theme;K.addRoute({path:"/"+F,name:F,meta:{icon:"add"},component:H(n||"default"),children:t.value})}return t.value}}})),Q=k(),K=c({history:d("./"),routes:[{path:"/",redirect:`/${Q}/welcome`},{path:"/login",name:"login",component:()=>A((()=>import("./XlogincXnXtCaZ.js")),__vite__mapDeps([29,3,4,24,1,21,11,12,13,5,14,15,16,9,17,18,19,20,22,23,25,26]),import.meta.url)},{path:"/"+Q,name:Q,component:()=>A((()=>import("./XstyleDefaultDD2Z-GHG.js")),__vite__mapDeps([31,3,4,13,21,11,12,5,14,15,16,9,17,18,19,20,22,23,24,25,26]),import.meta.url)},{path:"/:catchAll(.*)",meta:{closeTab:!0},component:()=>A((()=>import("./X404DLzpbq3O.js")),__vite__mapDeps([0,1]),import.meta.url)}]});K.beforeEach((async(e,t)=>{if(p.start(),e.meta.title&&(window.document.title=e.meta.title),"/login"===e.path)return!0;const o=J(),r=U();return o.initialized?(r.isLogIn()||r.logOut(),!0):(await o.loadServerRouter(!0),{path:e.path})})),K.afterEach((()=>{p.done()})),K.onError((()=>{p.done()}));const W=u.create({baseURL:te(),timeout:3e4});let Y,Z=0;const ee=()=>{Z--,Z<=0&&(clearTimeout(Y),I.emit("closeLoading"))};function te(){let e=[];return window.adminBox.RunAt&&e.push(window.adminBox.RunAt),window.adminBox.BackendRouterPrefix&&e.push(window.adminBox.BackendRouterPrefix),e.join("/")}W.interceptors.request.use((e=>{e.donNotShowLoading||(Z++,Y&&clearTimeout(Y),Y=setTimeout((()=>{Z>0&&I.emit("showLoading")}),400));const t=U().userAuth();return e.headers={"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+t.token,"X-User-Type":t.userType,"X-User-Id":t.userId,...e.headers},e}),(e=>(e.config.donNotShowLoading||ee(),r({showClose:!0,message:e,type:"error"}),e))),W.interceptors.response.use((e=>("application/json; charset=utf-8"==e.headers["content-type"]&&0!=e.data.code&&(401==e.data.code&&(localStorage.clear(),N(!0)),r({showClose:!0,message:e.data.msg,type:"error"})),e.data)),(e=>{if(ee(),401===e)N(!0);else r({showClose:!0,message:e,type:"error"});return e}));const oe={install:e=>{(async e=>{for(const r in l)e.component(r,l[r]);e.config.globalProperties.$loadJS=q,e.config.globalProperties.$loadTMPL=z,e.config.globalProperties.$message=r,e.config.globalProperties.$messageBox=n,e.config.globalProperties.$http=W,e.config.globalProperties.$useUserStore=U,e.config.globalProperties.$useRouterStore=J;const t=await C("views/main/menuTree.vue")();e.component("MenuTree",t.default||t);const o=await C("views/file/fileManagerBox.vue")();e.component("FMB",o.default||o)})(e)}},re={__name:"App",setup(e){let t="";if("en"===window.adminBox.Locale)t=i;else t=a;return(e,o)=>{const r=h("router-view"),n=h("el-config-provider");return y(),E(n,{locale:b(t)},{default:j((()=>[(y(),E(P,null,{default:j((()=>[T(r)])),_:1}))])),_:1},8,["locale"])}}};p.configure({showSpinner:!1,ease:"ease",speed:200});const ne=R(re);ne.use(o()),ne.use(s),ne.use(oe),ne.use(K),ne.mount("#app");export{J as a,S as b,O as c,I as e,W as h,L as p,te as s,U as u,D as v};
