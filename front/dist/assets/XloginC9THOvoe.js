import{r as g,a as v,u as I,b as k,o as C,c as i,d as S,e as q,f as e,g as h,w as l,v as z,h as U,p as B,i as N,j as R}from"./XindexDunG4lwt.js";import{_ as $}from"./X_plugin-vue_export-helperDlAUqK2U.js";const j=n=>(B("data-v-b48e741a"),n=n(),N(),n),L={class:"login-box"},M={class:"form-box"},P=j(()=>h("h2",{style:{color:"#666","margin-bottom":"30px"}},"登录",-1)),T={__name:"login",setup(n){const{proxy:b}=R(),p=g(),t=v({username:"",password:"",verification_code:"",captcha_id:""}),m=g(""),u=()=>{z().then(s=>{m.value=s.data.pic_path,t.captcha_id=s.data.captcha_id})};u();const w=v({username:[{required:!0,message:"填写用户名",trigger:"blur"}],password:[{required:!0,message:"填写密码",trigger:"blur"}],verification_code:[{required:!0,message:"填写验证码",trigger:"blur"}]}),_=I(),f=k(),y=async s=>{s&&await s.validate(async(o,c)=>{o?_.logIn(t).then(a=>{a?f.push(a):u()}):b.$message.error("请补全信息")})};return C(()=>{_.isLogIn()&&f.push({path:"/"})}),(s,o)=>{const c=i("el-image"),a=i("el-input"),d=i("el-form-item"),V=i("el-button"),x=i("el-form");return S(),q("div",L,[e(c,{src:"/images/login_bg.png"}),h("div",M,[e(x,{ref_key:"formRef",ref:p,model:t,rules:w,"status-icon":"","label-position":"top","show-all-levels":!1,style:{width:"100%"},"hide-required-asterisk":""},{default:l(()=>[P,e(d,{label:"用户名",prop:"username"},{default:l(()=>[e(a,{size:"large",modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"密码",prop:"password"},{default:l(()=>[e(a,{size:"large",type:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=r=>t.password=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"验证码",class:"v-box",prop:"verification_code"},{default:l(()=>[e(a,{size:"large",modelValue:t.verification_code,"onUpdate:modelValue":o[2]||(o[2]=r=>t.verification_code=r),style:{width:"55%"}},null,8,["modelValue"]),e(c,{style:{width:"40%",height:"38px"},src:m.value,onClick:u},null,8,["src"])]),_:1}),e(d,{style:{"margin-top":"30px"}},{default:l(()=>[e(V,{size:"large",type:"primary",style:{width:"100%"},onClick:o[3]||(o[3]=r=>y(p.value))},{default:l(()=>[U("登录 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},E=$(T,[["__scopeId","data-v-b48e741a"]]);export{E as default};
