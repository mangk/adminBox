import"./XvueVe3_Elhr.js";import{u as e,a as l}from"./Xindex3lybcBch.js";import{h as a}from"./X@vueuseDU8TvUvn.js";import{k as o,e as t,bO as u,a2 as s,c as r,Q as n,I as i,P as d,al as m,o as c,E as v,a as p,O as f,L as g,H as y,u as h,M as b,a4 as w,T as x,K as k,l as j}from"./X@vueCM7II4So.js";import"./XpiniaHbUHA5wR.js";import"./Xelement-plusCO1bik-q.js";import"./Xlodash-esBCrAzI1e.js";import"./X@element-plusCerOoRDG.js";import"./X@popperjsD3lHDW-0.js";import"./X@ctrlD2oWfImC.js";import"./XdayjsBLCVIqfw.js";import"./Xcos-js-sdk-v5B2H1ItxU.js";import"./Xasync-validatorCuo4gI4y.js";import"./Xmemoize-oneDs0C_khL.js";import"./Xnormalize-wheel-esVn5vHDCm.js";import"./X@floating-uipMauM7H8.js";import"./XaxiosBh_nfBBj.js";import"./XmittCNZ6avp8.js";import"./Xvue-routerCYJBVSJE.js";import"./XnprogressCIdgZ774.js";import"./Xvue3-sfc-loaderDa78GGQm.js";const _=["src"],X={key:0,class:"header-name"},V={key:0},S={class:"demo-rich-conent",style:{display:"flex",gap:"6px","flex-direction":"column"}},C={key:0},N={style:{display:"flex","justify-content":"space-between","align-items":"center"}},$={style:{display:"flex","justify-content":"space-between","align-items":"center"}},O={class:"dialog-footer"},U="#2d2d32",I={__name:"styleDefault",async setup(I){let P,z;const J=o(localStorage.getItem("x-theme-config")?JSON.parse(localStorage.getItem("x-theme-config")):{darkSidebar:!0}),M=t(!1),B=t(J.headerMenu),E=e=>{J.headerMenu=e,localStorage.setItem("x-theme-config",JSON.stringify(J))},L=t(J.darkSidebar),T=e=>{J.darkSidebar=e,localStorage.setItem("x-theme-config",JSON.stringify(J))},q=a("--el-color-primary");J.colorPrimary&&(q.value=J.colorPrimary);const D=[{value:"#4167F0",label:"blue"},{value:"#E63415",label:"red"},{value:"#e0620e",label:"orange"},{value:"#1EC79D",label:"green"},{value:"#6222C9",label:"purple"},{value:"#000",label:"black"}],F=t(window.adminBox.Logo?window.adminBox.Logo:"./images/logo.svg"),W=t(window.adminBox.Name),H=e(),K=t({});K.value=([P,z]=u((()=>H.userInfo())),P=await P,z(),P);const Q=()=>{H.logOut()},R=t(!1),A=([P,z]=u((()=>l().loadServerRouter())),P=await P,z(),P),G=(e,l)=>{},Y=(e,l)=>{},Z=()=>{document.body.clientWidth>=1100?R.value=!1:R.value=!0,M.value=document.body.clientWidth<=550},{proxy:ee}=j(),le=t(!1),ae=()=>{le.value=!1},oe=t({old:"",new:"",confirmNew:""}),te=()=>{oe.value.old?oe.value.new?oe.value.confirmNew?oe.value.old!=oe.value.new?oe.value.new===oe.value.confirmNew?ee.$http({url:"/sys/setting/user/changePassword",method:"PUT",data:oe.value}).then((e=>{0==e.code&&(le.value=!1,ee.$message.success("修改完成，下次登录请使用新密码"))})):ee.$message.error("新密码两次输入不一致"):ee.$message.error("新密码不能与旧密码相同"):ee.$message.error("重复新密码 不能为空"):ee.$message.error("新密码 不能为空"):ee.$message.error("当前密码 不能为空")};return s(Z),window.onresize=()=>Z(),(e,l)=>{const a=m("MenuTree"),o=m("el-menu"),t=m("el-scrollbar"),u=m("el-avatar"),s=m("el-divider"),j=m("el-tag"),I=m("el-switch"),P=m("el-button"),z=m("el-popover"),H=m("el-header"),Z=m("el-aside"),ee=m("router-view"),ue=m("el-main"),se=m("el-container"),re=m("el-input"),ne=m("el-form-item"),ie=m("el-form"),de=m("el-dialog");return c(),r(d,null,[n(se,{style:{width:"100%",height:"100%"}},{default:i((()=>[n(H,{class:"box-header",style:v({"background-color":L.value?U:"",color:L.value?"#fff":""})},{default:i((()=>[p("div",{class:"header-logo-box",style:v({boxShadow:B.value||M.value?"2px 0 4px rgba(0, 0, 0, 0.16)":"unset"})},[p("img",{class:"header-logo",src:F.value},null,8,_),M.value?g("",!0):(c(),r("div",X,f(W.value),1))],4),n(t,{style:{height:"var(--box-header-height)",margin:"0 8px"}},{default:i((()=>[B.value||M.value?(c(),y(o,{key:0,class:"header-menu","default-active":e.$route.name,onOpen:G,onClose:Y,collapse:R.value,"unique-opened":"",router:"",mode:"horizontal",ellipsis:!1,"background-color":L.value?U:"","text-color":L.value?"#fff":"",style:{width:"auto"}},{default:i((()=>[n(a,{menus:h(A)},null,8,["menus"])])),_:1},8,["default-active","collapse","background-color","text-color"])):g("",!0)])),_:1}),n(z,null,{reference:i((()=>[p("div",{class:"left header-user",style:v({boxShadow:B.value||M.value?"-2px 0 4px rgba(0, 0, 0, 0.16)":"unset"})},[M.value?g("",!0):(c(),r("span",V,f(K.value.nick_name),1)),n(u,{src:K.value.avatar,icon:"UserFilled",size:30,style:{"margin-left":"5px"}},null,8,["src"])],4)])),default:i((()=>[p("div",S,[M.value?(c(),r("div",C,[b(f(K.value.nick_name)+" ",1),n(s,{style:{margin:"0"}})])):g("",!0),p("div",null,[(c(),r(d,null,w(D,(e=>n(j,{key:e,color:e.value,onClick:l=>{return a=e.value,q.value=a,J.colorPrimary=a,void localStorage.setItem("x-theme-config",JSON.stringify(J));var a}},null,8,["color","onClick"]))),64))]),n(s,{style:{margin:"0"}}),p("div",N,[b(" 顶部菜单"),n(I,{modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),onChange:E,disabled:M.value},null,8,["modelValue","disabled"])]),n(s,{style:{margin:"0"}}),p("div",$,[b(" 深色边栏"),n(I,{modelValue:L.value,"onUpdate:modelValue":l[1]||(l[1]=e=>L.value=e),onChange:T},null,8,["modelValue"])]),n(s,{style:{margin:"0"}}),n(P,{link:"",onClick:l[2]||(l[2]=e=>le.value=!0),style:{width:"100%"}},{default:i((()=>[b("修改密码")])),_:1}),n(s,{style:{margin:"0"}}),n(P,{link:"",onClick:Q},{default:i((()=>[b("退出")])),_:1})])])),_:1})])),_:1},8,["style"]),n(se,{class:"box-asside-and-main"},{default:i((()=>[B.value||M.value?g("",!0):(c(),y(Z,{key:0,class:"box-aside",style:v({"background-color":L.value?U:"",color:L.value?"#fff":""})},{default:i((()=>[n(t,null,{default:i((()=>[n(x,{duration:{enter:800,leave:100},mode:"out-in",name:"el-fade-in-linear"},{default:i((()=>[n(o,{"default-active":e.$route.name,onOpen:G,onClose:Y,collapse:R.value,"unique-opened":"",router:"","background-color":L.value?U:"","text-color":L.value?"#fff":""},{default:i((()=>[n(a,{menus:h(A)},null,8,["menus"])])),_:1},8,["default-active","collapse","background-color","text-color"])])),_:1})])),_:1})])),_:1},8,["style"])),n(ue,{class:"box-main"},{default:i((()=>[n(t,null,{default:i((()=>[n(ee,null,{default:i((({Component:l})=>[n(x,{duration:{enter:800,leave:100},mode:"out-in",name:"el-fade-in-linear"},{default:i((()=>[(c(),y(k(l),{key:e.$route.path}))])),_:2},1024)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(de,{modelValue:le.value,"onUpdate:modelValue":l[6]||(l[6]=e=>le.value=e),title:"修改密码",width:"500"},{footer:i((()=>[p("div",O,[n(P,{onClick:ae},{default:i((()=>[b("取消")])),_:1}),n(P,{type:"primary",onClick:te},{default:i((()=>[b(" 确认修改 ")])),_:1})])])),default:i((()=>[n(ie,{"label-position":"right","label-width":"auto"},{default:i((()=>[n(ne,{label:"当前密码","label-position":"right"},{default:i((()=>[n(re,{modelValue:oe.value.old,"onUpdate:modelValue":l[3]||(l[3]=e=>oe.value.old=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(ne,{label:"新密码","label-position":"right"},{default:i((()=>[n(re,{modelValue:oe.value.new,"onUpdate:modelValue":l[4]||(l[4]=e=>oe.value.new=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(ne,{label:"重复新密码","label-position":"right"},{default:i((()=>[n(re,{modelValue:oe.value.confirmNew,"onUpdate:modelValue":l[5]||(l[5]=e=>oe.value.confirmNew=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};export{I as default};
