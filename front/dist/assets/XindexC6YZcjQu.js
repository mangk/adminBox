const __vite__fileDeps=["assets/X404DLzpbq3O.js","assets/X_plugin-vue_export-helperBCo6x5W8.js","assets/XloginvvDIlBbt.js","assets/XvueCyDLjQZ5.js","assets/X@vueSdcp2x8a.js","assets/Xvue-routerCZMibURm.js","assets/XpiniaDkaaaSbL.js","assets/Xelement-plusViPJHclL.js","assets/Xlodash-esBg5u8xPa.js","assets/X@vueuseCSz_Rkca.js","assets/X@element-plusCAKmCgXq.js","assets/X@popperjsD3lHDW-0.js","assets/X@ctrlD2oWfImC.js","assets/Xdayjst441MSVg.js","assets/Xasync-validatorCuo4gI4y.js","assets/Xmemoize-oneDs0C_khL.js","assets/Xnormalize-wheel-esVn5vHDCm.js","assets/X@floating-uipMauM7H8.js","assets/Xvue3-sfc-loaderDa78GGQm.js","assets/XaxiosCURSphCx.js","assets/XmittCNZ6avp8.js","assets/XnprogressDgs0sPf-.js","assets/XasideBIARLQPj.js","assets/XmenuTreeDxIhcR46.js","assets/XheaderDzrdm-Gr.js","assets/XtabBxqPn3AR.js","assets/Xmainu1CwO0jL.js","assets/XstyleDefaultBEQl16Nv.js","assets/XstyleWhiteBtfjOm9m.js","assets/XapiCJKwjJI4.js","assets/XmenuBAQHmGjM.js","assets/Xdepartmentr7NDIZgP.js","assets/Xdepartment3WVD55Io.js","assets/XpremissionSet_MPkLbzO.js","assets/XindexDdrtUNH3.js","assets/Xmenu5qEXo4el.js","assets/XroleDJBR10Xm.js","assets/XroleDEpD5lGX.js","assets/XuserCXon6U5f.js","assets/XfileUploadDfM9fPfq.js","assets/XserverComponentBde-apHT.js","assets/XwelcomeBcZO461f.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{V as e}from"./XvueCyDLjQZ5.js";import{d as t,c as o}from"./XpiniaDkaaaSbL.js";import{E as n,a as s,z as r,b as a,c as i}from"./Xelement-plusViPJHclL.js";import{Q as l}from"./X@element-plusCAKmCgXq.js";import{i as c}from"./Xvue3-sfc-loaderDa78GGQm.js";import{a as u}from"./XaxiosCURSphCx.js";import{m}from"./XmittCNZ6avp8.js";import{c as d,a as p}from"./Xvue-routerCZMibURm.js";import{N as _}from"./XnprogressDgs0sPf-.js";import{r as g,am as f,aY as h,ah as v,o as w,P as E,Q as y,aL as j,X as T,u as P,as as X}from"./X@vueSdcp2x8a.js";import"./Xlodash-esBg5u8xPa.js";import"./X@vueuseCSz_Rkca.js";import"./X@popperjsD3lHDW-0.js";import"./X@ctrlD2oWfImC.js";import"./Xdayjst441MSVg.js";import"./Xasync-validatorCuo4gI4y.js";import"./Xmemoize-oneDs0C_khL.js";import"./Xnormalize-wheel-esVn5vHDCm.js";import"./X@floating-uipMauM7H8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I=m(),L={},A=function(e,t,o){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in L)return;L[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,o&&s.setAttribute("nonce",o),document.head.appendChild(s),t?new Promise(((t,o)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return n.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},S=()=>q({url:"/sys/auth/permissionAll",method:"GET"}),O=(e,t)=>q({url:"/sys/auth/permissionGetByIdAndModule",method:"POST",data:{id:e,module:t}}),R=e=>q({url:"/sys/auth/permissionSave",method:"PUT",data:e}),x=()=>q({url:"/sys/verificationCode",method:"GET"}),D=Object.assign({"../views/404.vue":()=>A((()=>import("./X404DLzpbq3O.js")),__vite__mapDeps([0,1])),"../views/login.vue":()=>A((()=>import("./XloginvvDIlBbt.js")),__vite__mapDeps([2,3,4,5,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])),"../views/main/components/aside.vue":()=>A((()=>import("./XasideBIARLQPj.js")),__vite__mapDeps([22,3,4,23,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/main/components/header.vue":()=>A((()=>import("./XheaderDzrdm-Gr.js")),__vite__mapDeps([24,3,4,25,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,1])),"../views/main/components/main.vue":()=>A((()=>import("./Xmainu1CwO0jL.js")),__vite__mapDeps([26,3,4,1])),"../views/main/components/tab.vue":()=>A((()=>import("./XtabBxqPn3AR.js")),__vite__mapDeps([25,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])),"../views/main/menuTree.vue":()=>A((()=>import("./XmenuTreeDxIhcR46.js")),__vite__mapDeps([23,3,4])),"../views/main/styleDefault.vue":()=>A((()=>import("./XstyleDefaultBEQl16Nv.js")),__vite__mapDeps([27,3,4,23,9,1,6,7,8,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/main/styleWhite.vue":()=>A((()=>import("./XstyleWhiteBtfjOm9m.js")),__vite__mapDeps([28,3,4,26,1,23,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/api.vue":()=>A((()=>import("./XapiCJKwjJI4.js")),__vite__mapDeps([29,3,4,30,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/department.vue":()=>A((()=>import("./Xdepartmentr7NDIZgP.js")),__vite__mapDeps([31,3,4,10,32,33,1,6,7,8,9,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/index.vue":()=>A((()=>import("./XindexDdrtUNH3.js")),__vite__mapDeps([34,1])),"../views/setting/menu.vue":()=>A((()=>import("./Xmenu5qEXo4el.js")),__vite__mapDeps([35,3,4,30,10,1,6,7,8,9,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/premissionSet.vue":()=>A((()=>import("./XpremissionSet_MPkLbzO.js")),__vite__mapDeps([33,3,4,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/role.vue":()=>A((()=>import("./XroleDJBR10Xm.js")),__vite__mapDeps([36,3,4,37,33,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21])),"../views/setting/user.vue":()=>A((()=>import("./XuserCXon6U5f.js")),__vite__mapDeps([38,3,4,33,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21,32,37,39])),"../views/util/fileUpload.vue":()=>A((()=>import("./XfileUploadDfM9fPfq.js")),__vite__mapDeps([39,3,4,7,8,9,10,11,12,13,14,15,16,17,6,18,19,20,5,21])),"../views/util/serverComponent.vue":()=>A((()=>import("./XserverComponentBde-apHT.js")),__vite__mapDeps([40,3,4,5,1])),"../views/welcome.vue":()=>A((()=>import("./XwelcomeBcZO461f.js")),__vite__mapDeps([41,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5,21]))}),b=Object.assign({});function V(e){const t=Object.keys(D).filter((t=>t.replace("../","")===e))[0];return D[t]}function B(e){e.length&&e.forEach((e=>{e.component&&("views"===e.component.split("/")[0]?e.component=V(e.component):"plugins"===e.component.split("/")[0]&&(e.component=function(e){const t=Object.keys(b).filter((t=>t.replace("../","")===e))[0];return b[t]}(e.component))),e.children&&e.children.length&&(delete e.component,B(e.children))}))}function C(){var e="admin";return window._adminBox&&window._adminBox.backgroundPrefix&&(e=window._adminBox.backgroundPrefix),e}const k=t("user",(()=>{const e=g(0),t=g({}),o="x-token",n="x-user-type",s="x-user-id";return{initialized:e,userInfo:(o=!1)=>((o||0===e.value)&&(e.value=1),t.value),setUserData:e=>{t.value=e},token:()=>{var e=localStorage.getItem(o);if(e)return e;z.replace({name:"login"})},userType:()=>localStorage.getItem(n),userId:()=>localStorage.getItem(s),logIn:async r=>{const a=C();var i,l=await(i=r,q({url:"/sys/login",method:"POST",data:i}));if(0!=l.code)return"";t.value=l.data,e.value=1,await localStorage.setItem(o,l.data.jwt_token),await localStorage.setItem(n,"default"),await localStorage.setItem(s,l.data.id);const c=$();return await c.loadServerRouter(!0),l.data.user_config.home_page?l.data.user_config.home_page:`/${a}/welcome`},logOut:()=>{localStorage.clear(),window.location.href=window.location.origin},isLogIn:()=>localStorage.getItem(o)&&localStorage.getItem(n)&&localStorage.getItem(s)}})),U=C(),$=t("router",(()=>{const e=g(0),t=g([]);return{initialized:e,loadServerRouter:async(o=!1)=>{const n=k();if(o||0===e.value){e.value=1;const o=await q({url:"/sys/auth/userPermission",method:"GET"});t.value=o.data.menu[0].children,n.setUserData(o.data.user),B(t.value)}let s=n.userInfo(),r={default:V("views/main/styleDefault.vue"),white:V("views/main/styleWhite.vue")},a=r[s.user_config.theme?s.user_config.theme:"default"];return z.addRoute({path:"/"+U,name:U,meta:{icon:"add"},component:a||r.default,children:t.value}),t.value}}})),N=C(),z=d({history:p("/"),routes:[{path:"/",redirect:`/${N}/welcome`},{path:"/login",name:"login",component:()=>A((()=>import("./XloginvvDIlBbt.js")),__vite__mapDeps([2,3,4,5,1,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))},{path:"/"+N,name:N,component:()=>A((()=>import("./XstyleDefaultBEQl16Nv.js")),__vite__mapDeps([27,3,4,23,9,1,6,7,8,10,11,12,13,14,15,16,17,18,19,20,5,21]))},{path:"/:catchAll(.*)",meta:{closeTab:!0},component:()=>A((()=>import("./X404DLzpbq3O.js")),__vite__mapDeps([0,1]))}]});z.beforeEach((async(e,t)=>{if(_.start(),e.meta.title&&(window.document.title=e.meta.title),"/login"===e.path)return!0;const o=$(),n=k();return o.initialized?(n.isLogIn()||n.logOut(),!0):(await o.loadServerRouter(!0),{path:e.path})})),z.afterEach((()=>{_.done()})),z.onError((()=>{_.done()}));const q=u.create({baseURL:W(),timeout:3e4});let M,G=0;const H=()=>{G--,G<=0&&(clearTimeout(M),I.emit("closeLoading"))};function W(){let e=[];return window.adminBox.Host&&e.push(window.adminBox.Host),window.adminBox.BackendRouterPrefix&&e.push(window.adminBox.BackendRouterPrefix),e.join("/")}q.interceptors.request.use((e=>{e.donNotShowLoading||(G++,M&&clearTimeout(M),M=setTimeout((()=>{G>0&&I.emit("showLoading")}),400));const t=k();return e.headers={"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+t.token(),"X-User-Type":t.userType(),"X-User-Id":t.userId(),...e.headers},e}),(e=>(e.config.donNotShowLoading||H(),n({showClose:!0,message:e,type:"error"}),e))),q.interceptors.response.use((e=>0===e.data.code||"true"===e.headers.success?(e.headers.msg&&(e.data.msg=decodeURI(e.headers.msg)),e.data):(n({showClose:!0,message:e.data.msg||decodeURI(e.headers.msg),type:"error"}),e.data.data&&e.data.data.reload&&(localStorage.clear(),z.push({name:"login",replace:!0})),e.data)),(e=>{if(e.config.donNotShowLoading||H(),e.response){switch(e.response.status){case 401:n({showClose:!0,message:e.response.data.msg,type:"error"}),z.push({name:"login",replace:!0});break;case 500:s.confirm(`\n        <p>检测到接口错误${e}</p>\n        <p>错误码<span style="color:red"> 500 </span>：此类错误内容常见于后台panic，请先查看后台日志，如果影响您正常使用可强制登出清理缓存</p>\n        `,"接口报错",{dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,confirmButtonText:"清理缓存",cancelButtonText:"取消"}).then((()=>{localStorage.clear(),z.push({name:"Login",replace:!0})}));break;case 404:s.confirm(`\n          <p>检测到接口错误${e}</p>\n          <p>错误码<span style="color:red"> 404 </span>：此类错误多为接口未注册（或未重启）或者请求路径（方法）与api路径（方法）不符--如果为自动化代码请检查是否存在空格</p>\n          `,"接口报错",{dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,confirmButtonText:"我知道了",cancelButtonText:"取消"})}return e}s.confirm(`\n        <p>检测到请求错误</p>\n        <p>${e}</p>\n        `,"请求报错",{dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,confirmButtonText:"稍后重试",cancelButtonText:"取消"})}));const F=(e,t)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=()=>{"function"==typeof t&&t()},document.head.appendChild(o)},Q=(t,o="myConvert")=>{const n={moduleCache:{vue:e},getFile:()=>fetch(t,{method:"GET"}).then((e=>e.ok?e.text():Promise.reject(e))),addStyle(e){const t=document.createElement("style");t.setAttribute("id",o),t.textContent=e;const n=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(t,n)}},s=h((()=>c(`${o}.vue`,n)));return f(s)},J={install:e=>{(async e=>{for(const o in l)e.component(o,l[o]);const t=await V("views/util/fileUpload.vue")();e.component("FileUpload",t.default||t),e.config.globalProperties.$loadJS=F,e.config.globalProperties.$loadTMPL=Q,e.config.globalProperties.$message=n,e.config.globalProperties.$http=q})(e)}},K={__name:"App",setup(e){let t="";if("en"===window.adminBox.Locale)t=a;else t=r;return(e,o)=>{const n=v("router-view"),s=v("el-config-provider");return w(),E(s,{locale:P(t)},{default:y((()=>[(w(),E(j,null,{default:y((()=>[T(n)])),_:1}))])),_:1},8,["locale"])}}};_.configure({showSpinner:!1,ease:"ease",speed:200});const Y=X(K);Y.use(o()),Y.use(i),Y.use(J),Y.use(z),Y.mount("#app");export{$ as a,O as b,R as c,I as e,q as h,S as p,W as s,k as u,x as v};
