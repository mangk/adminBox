import{r as g,a as h,u as I,b as k,o as C,I as S,c as q,d as n,e as z,f as B,g as e,h as v,w as l,v as U,i as R,p as M,j as N,k as $}from"./XindexZv19rMVF.js";import{_ as j}from"./X_plugin-vue_export-helperDlAUqK2U.js";const L=i=>(M("data-v-1449ba34"),i=i(),N(),i),P={class:"login-box"},T={class:"form-box"},A=L(()=>v("h2",{style:{color:"#666","margin-bottom":"30px"}},"登录",-1)),D={__name:"login",setup(i){const{proxy:w}=$(),p=g(),t=h({username:"",password:"",verification_code:"",captcha_id:""}),m=g(""),c=()=>{U().then(s=>{m.value=s.data.pic_path,t.captcha_id=s.data.captcha_id})};c();const b=h({username:[{required:!0,message:"填写用户名",trigger:"blur"}],password:[{required:!0,message:"填写密码",trigger:"blur"}],verification_code:[{required:!0,message:"填写验证码",trigger:"blur"}]}),_=I(),f=k(),x=async s=>{s&&await s.validate(async(o,u)=>{o?_.logIn(t).then(a=>{a?f.push(a):c()}):w.$message.error("请补全信息")})};return C(()=>{S().then(s=>{s.data&&(window.location.href=window.location.origin)})}),q(()=>{_.isLogIn()&&f.push({path:"/"})}),(s,o)=>{const u=n("el-image"),a=n("el-input"),d=n("el-form-item"),y=n("el-button"),V=n("el-form");return z(),B("div",P,[e(u,{src:"/images/login_bg.png"}),v("div",T,[e(V,{ref_key:"formRef",ref:p,model:t,rules:b,"status-icon":"","label-position":"top","show-all-levels":!1,style:{width:"100%"},"hide-required-asterisk":""},{default:l(()=>[A,e(d,{label:"用户名",prop:"username"},{default:l(()=>[e(a,{size:"large",modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"密码",prop:"password"},{default:l(()=>[e(a,{size:"large",type:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=r=>t.password=r)},null,8,["modelValue"])]),_:1}),e(d,{label:"验证码",class:"v-box",prop:"verification_code"},{default:l(()=>[e(a,{size:"large",modelValue:t.verification_code,"onUpdate:modelValue":o[2]||(o[2]=r=>t.verification_code=r),style:{width:"55%"}},null,8,["modelValue"]),e(u,{style:{width:"40%",height:"38px"},src:m.value,onClick:c},null,8,["src"])]),_:1}),e(d,{style:{"margin-top":"30px"}},{default:l(()=>[e(y,{size:"large",type:"primary",style:{width:"100%"},onClick:o[3]||(o[3]=r=>x(p.value))},{default:l(()=>[R("登录 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},G=j(D,[["__scopeId","data-v-1449ba34"]]);export{G as default};
